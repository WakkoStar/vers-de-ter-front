{"version":3,"sources":["env/Config.js","API/index.js","Components/NavBar.js","Components/ArticleList.js","Components/Homepage.js","Components/Rubrique.js","Components/Search.js","Components/Article.js","Components/Contact.js","Components/Footer.js","Components/Auth.js","App/App.js","index.js"],"names":["headers","getPostById","id","axios","get","burl","getPostsResearchTitle","search","getPostsResearchDescription","getAccess","Cheminots","verifyCode","code","localStorage","getItem","isLength","length","isLetter","match","sendEmail","email","post","NavBar","useState","categories","setCategories","isNavDisplay","setIsNavDisplay","getCategories","a","res","data","useEffect","toggleNav","$","toggleClass","toggleMenu","bool","index","on","onClick","src","to","className","alt","map","nom","rubriques","key","onMouseOver","onMouseOut","truncateString","str","num","slice","ArticleList","titre","description","rubrique","link","gallerie","url","source","escapeHtml","Home","posts","setPosts","getPosts","Rubrique","useParams","useRouteMatch","location","useLocation","some","p","pathname","state","from","Search","postsByTitle","setPostsByTitle","postsByDescription","setPostsByDescription","setSearch","searchPostsByTitle","searchPostsByDescription","type","onChange","e","target","value","placeholder","Article","setPost","getPost","Carousel","name","Item","Contact","postEmail","mail","document","getElementById","message","subject","text","alert","then","catch","Form","Group","controlId","Label","Control","Text","as","rows","Button","Footer","LoginPage","setText","history","useHistory","setItem","replace","App","basename","process","exact","path","Auth","ReactDOM","render","StrictMode"],"mappings":"kPAAe,mCCIXA,EAAU,CACV,eAAgB,oBAOb,SAASC,EAAYC,GACxB,OAAOC,IAAMC,IAAN,UAAaC,EAAb,kBAA2BH,IAO/B,SAASI,EAAsBC,GAClC,OAAOJ,IAAMC,IAAN,UAAaC,EAAb,iCAA0CE,EAA1C,8BAGJ,SAASC,EAA4BD,GACxC,OAAOJ,IAAMC,IAAN,UAAaC,EAAb,uCAAgDE,EAAhD,8BAOJ,SAASE,EAAUC,GACtB,OAAGA,GACQC,IAMR,SAASA,IACZ,IAAIC,EAAOC,aAAaC,QAAQ,QAChC,GAAGF,EAAK,CACJ,IAAMG,EAA2B,IAAhBH,EAAKI,OAClBC,GAAW,EAGf,OAFGL,EAAK,KAAIK,EAAWL,EAAK,GAAGM,MAAM,WAE9BH,GAAYE,EAEnB,OAAO,EAKR,SAASE,EAAUC,GACtB,OAAOjB,IAAMkB,KAAN,UAAchB,EAAd,UAA2Be,EAAM,CAACpB,Y,qBCgE9BsB,EAnHA,WAAO,IAAD,EAEmBC,mBAAS,IAF5B,mBAEVC,EAFU,KAEEC,EAFF,OAGuBF,oBAAS,GAHhC,mBAGVG,EAHU,KAGIC,EAHJ,KAKXC,EAAa,uCAAG,4BAAAC,EAAA,sEDoBf1B,IAAMC,IAAN,UAAaC,EAAb,mCCpBe,OACZyB,EADY,OAElBL,EAAcK,EAAIC,MAFA,2CAAH,qDAKnBC,qBAAU,WACNJ,MACF,IAEF,IAAMK,EAAY,WACdC,IAAE,QAAQC,YAAY,aAAaT,GACnCQ,IAAE,QAAQC,YAAY,kBAAkBT,GACxCC,GAAiBD,IAQfU,EAAa,SAACC,EAAMC,GACtBJ,IAAEI,GAAOH,YAAY,YAAYE,GACjCH,IAAEI,GAAOH,YAAY,iBAAiBE,IAK1C,OAFAH,IAAE,KAAKK,GAAG,SAAS,kBAVfL,IAAE,QAAQC,YAAY,cAAa,GACnCD,IAAE,QAAQC,YAAY,kBAAiB,QACvCR,GAAgB,MAWhB,oCACA,yBAAKzB,GAAG,UACJ,6BACI,4BAAQsC,QAASP,GAAW,yBAAKQ,IAAI,2FACrC,kBAAC,IAAD,CAAMC,GAAG,KAAI,yBAAKC,UAAU,OAAOF,IAAI,uBAAuBG,IAAI,UAClE,kBAAC,IAAD,CAAMF,GAAE,eAAiB,yBAAKD,IAAI,0HAEtC,yBAAKE,UAAU,cACX,6BACI,gDACA,4BAAQH,QAASP,GACb,yBAAKQ,IAAI,qEAGjB,4BAEQjB,EAAWqB,KAAI,YAAuB,IAArBC,EAAoB,EAApBA,IAAKC,EAAe,EAAfA,UAClB,OACI,wBAAIC,IAAKF,GACJA,EACD,6BACI,4BAEQC,EAAUF,KAAI,YAAY,IAAVC,EAAS,EAATA,IACZ,OACI,4BACI,kBAAC,IAAD,CAAMJ,GAAE,WAAMI,IAAQA,gBAc1E,yBAAK5C,GAAG,WACJ,6BACI,6BACI,kBAAC,IAAD,CAAMwC,GAAG,KACL,yBAAKC,UAAU,OAAOF,IAAI,uBAAuBG,IAAI,SACrD,kDAIR,6BACI,kBAAC,IAAD,CAAMF,GAAE,eAAiB,yBAAKD,IAAI,wHAAlC,gBAGR,4BAEYjB,EAAWqB,KAAI,WAAmBP,GAAW,IAA5BQ,EAA2B,EAA3BA,IAAKC,EAAsB,EAAtBA,UAClB,OACI,wBAAIC,IAAKF,EAAKG,YAAa,kBAAMb,GAAW,EAAD,WAAWE,KAAUY,WAAY,kBAAMd,GAAW,EAAD,WAAYE,MACnGQ,EACD,6BACI,wBAAI5C,GAAIoC,EAAOK,UAAU,iBAEjBI,EAAUF,KAAI,YAAY,IAAVC,EAAS,EAATA,IACZ,OACI,4BACI,kBAAC,IAAD,CAAMJ,GAAE,WAAMI,IAAQA,iB,iBCxElF,SAASK,EAAeC,EAAKC,GAGzB,OAAID,EAAIpC,QAAUqC,EACTD,EAGFA,EAAIE,MAAM,EAAGD,GAAO,MAGhBE,MAnCK,SAAC,GAAwD,IAAvDC,EAAsD,EAAtDA,MAAOC,EAA+C,EAA/CA,YAAaC,EAAkC,EAAlCA,SAAUxD,EAAwB,EAAxBA,GAAIyD,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,SAC1D,OAEI,yBAAKjB,UAAU,eAAeK,IAAK9C,GAC/B,kBAAC,IAAD,CAAMwC,GAAIiB,GACV,yBAAKlB,IAAyB,IAApBmB,EAAS5C,QAAT,UAA4BX,GAA5B,OAAmCuD,EAAS,GAAGC,KAAOjB,IAAKY,IACrE,4BAAKA,GACL,yBAAKb,UAAU,eACX,kBAAC,IAAD,CACImB,OAAQX,EAAeM,EAAa,KACpCM,YAAY,KAGpB,6BACI,0BAAMpB,UAAU,iBACZ,yBAAKF,IAAI,+FACRiB,EAASZ,SCoBfkB,EArCF,WAAO,IAAD,EAEWzC,mBAAS,IAFpB,mBAER0C,EAFQ,KAEDC,EAFC,KAITC,EAAQ,uCAAG,4BAAAtC,EAAA,sEHCV1B,IAAMC,IAAN,UAAaC,EAAb,oEGDU,OACPyB,EADO,OAEboC,EAASpC,EAAIC,MAFA,2CAAH,qDASd,OAJAC,qBAAU,WACNmC,MACF,IAGE,oCACA,yBAAK1B,IAAI,oBAAoBvC,GAAG,kBAChC,yBAAKuC,IAAI,aAAavC,GAAG,mBACzB,yBAAKyC,UAAU,eACX,mDAGAsB,EAAMpB,KAAI,YAAmD,IAAjDW,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,SAAUxD,EAAkB,EAAlBA,GAAI0D,EAAc,EAAdA,SAC1C,OACI,kBAAC,EAAD,CACIJ,MAAOA,EACPC,YAAaA,EACbC,SAAUA,EACVxD,GAAIA,EACJ0D,SAAUA,EACVD,KAAI,WAAMD,EAASZ,IAAf,YAAsB5C,UCiBnCkE,EA7CE,WAAO,IAEftB,EAAOuB,cAAPvB,IACAe,EAAOS,cAAPT,IAHc,EAIOtC,mBAAS,IAJhB,mBAIZ0C,EAJY,KAILC,EAJK,KAKfK,EAAWC,cAWf,OARAxC,qBAAU,YACQ,uCAAG,4BAAAH,EAAA,sEJEU6B,EIDcZ,EJEtC3C,IAAMC,IAAN,UAAaC,EAAb,+BAAwCqD,EAAxC,2BIHc,OACP5B,EADO,OAEboC,EAASpC,EAAIC,MAFA,iCJElB,IAA4B2B,IIFV,OAAH,qDAIdS,KACF,CAACrB,IAEAmB,IACyD,IAArDxD,EAAUwD,EAAMQ,MAAK,SAAAC,GAAC,OAAIA,EAAEhB,SAAShD,cAC7B,kBAAC,IAAD,CAAUgC,GAAI,CAACiC,SAAU,SAAUC,MAAO,CAACC,KAAMN,MAK5D,oCACA,yBAAK5B,UAAU,eACX,4BAAKG,IAGLmB,EAAMpB,KAAI,YAAmD,IAAjDW,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,SAAUxD,EAAkB,EAAlBA,GAAI0D,EAAc,EAAdA,SAC1C,OACI,kBAAC,EAAD,CACIJ,MAAOA,EACPC,YAAaA,EACbC,SAAUA,EACVxD,GAAIA,EACJ0D,SAAUA,EACVD,KAAI,UAAKE,EAAL,YAAY3D,UCyBzB4E,EA/DA,WAAO,IAAD,EAEuBvD,mBAAS,IAFhC,mBAEVwD,EAFU,KAEIC,EAFJ,OAGmCzD,mBAAS,IAH5C,mBAGV0D,EAHU,KAGUC,EAHV,OAIW3D,mBAAS,IAJpB,mBAIVhB,EAJU,KAIF4E,EAJE,KAMXC,EAAkB,uCAAG,4BAAAvD,EAAA,sEACLvB,EAAsBC,GADjB,OACjBuB,EADiB,OAEvBkD,EAAgBlD,EAAIC,MAFG,2CAAH,qDAIlBsD,EAAwB,uCAAG,4BAAAxD,EAAA,sEACXrB,EAA4BD,GADjB,OACvBuB,EADuB,OAE7BoD,EAAsBpD,EAAIC,MAFG,2CAAH,qDAU9B,OALAC,qBAAU,WACNoD,IACAC,MACF,CAAC9E,IAGC,oCACA,yBAAKoC,UAAU,eACX,2BAAO2C,KAAK,OAAOC,SAAU,SAACC,GAAD,OAAOL,EAAUK,EAAEC,OAAOC,QAAQA,MAAOnF,EAAQoF,YAAY,sBAG1FZ,EAAalC,KAAI,YAAmD,IAAjDW,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,SAAUE,EAAkB,EAAlBA,SAAU1D,EAAQ,EAARA,GACvD,OACI,kBAAC,EAAD,CACIsD,MAAOA,EACPC,YAAaA,EACbC,SAAUA,EACVxD,GAAIA,EACJ0D,SAAUA,EACVD,KAAI,WAAMD,EAASZ,IAAf,YAAsB5C,QAMtC+E,EAAmBpC,KAAI,YAAmD,IAAjDW,EAAgD,EAAhDA,MAAOC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,SAAUxD,EAAkB,EAAlBA,GAAI0D,EAAc,EAAdA,SAEvD,OADmBmB,EAAaN,MAAK,SAACpD,GAAD,OAAUA,EAAKnB,KAAOA,MAGnD,kBAAC,EAAD,CACIsD,MAAOA,EACPC,YAAaA,EACbC,SAAUA,EACVxD,GAAIA,EACJ0D,SAAUA,EACVD,KAAI,WAAMD,EAASZ,IAAf,YAAsB5C,U,QCOvC0F,EAnDC,WAAO,IAAD,EAEMrE,mBAAS,IAFf,mBAEXF,EAFW,KAELwE,EAFK,KAGd3F,EAAMmE,cAANnE,GACAqE,EAAWC,cAUf,OARAxC,qBAAU,YACO,uCAAG,4BAAAH,EAAA,sEACM5B,EAAYC,GADlB,OACN4B,EADM,OAEZ+D,EAAQ/D,EAAIC,MAFA,2CAAH,qDAIZ+D,KACH,CAAC5F,IAEAmB,GAAQA,EAAKqC,WAC8B,IAAvCjD,EAAUY,EAAKqC,SAAShD,WAChB,kBAAC,IAAD,CAAUgC,GAAI,CAACiC,SAAU,SAAUC,MAAO,CAACC,KAAMN,MAM5D,yBAAK5B,UAAU,WACX,kBAACoD,EAAA,EAAD,KAEI1E,EAAKuC,SACDvC,EAAKuC,SAASf,KAAI,YAAkB,IAAhBgB,EAAe,EAAfA,IAAKmC,EAAU,EAAVA,KACrB,OACI,kBAACD,EAAA,EAASE,KAAV,KACI,yBACIxD,IAAG,UAAKpC,GAAL,OAAYwD,GACfjB,IAAKoD,QAMrB,IAIR,4BACK3E,EAAKmC,OAEV,kBAAC,IAAD,CACIM,OAAQzC,EAAKoC,YACbM,YAAY,M,kBCLbmC,EA/CC,WAEZ,IAAMC,EAAS,uCAAG,gCAAAtE,EAAA,sDACRuE,EAAOC,SAASC,eAAe,QAAQZ,MACvCa,EAAUF,SAASC,eAAe,WAAWZ,MAC7CtE,EAAQ,CACVsB,GAAI,uBACJmC,KAAM,6BACN2B,QAAQ,GAAD,OAAKJ,EAAL,+BACPK,KAAMF,GAEE,KAATH,GAA2B,KAAZG,EACdG,MAAM,oCAENvF,EAAUC,GACTuF,MAAK,WACFD,MAAM,+CAETE,OAAM,WACHF,MAAM,4BAjBA,2CAAH,qDAwBf,OACI,oCACI,kBAACG,EAAA,EAAD,KACI,8CACA,kBAACA,EAAA,EAAKC,MAAN,CAAYC,UAAU,QAClB,kBAACF,EAAA,EAAKG,MAAN,oBACA,kBAACH,EAAA,EAAKI,QAAN,CAAc3B,KAAK,UACnB,kBAACuB,EAAA,EAAKK,KAAN,CAAWvE,UAAU,cAArB,wCAIJ,kBAACkE,EAAA,EAAKC,MAAN,CAAYC,UAAU,WAClB,kBAACF,EAAA,EAAKG,MAAN,sBACA,kBAACH,EAAA,EAAKI,QAAN,CAAcE,GAAG,WAAWC,KAAK,QAErC,kBAACC,EAAA,EAAD,CAAQ7E,QAAS2D,GAAjB,gBC3BDmB,EAdA,WACX,OACI,gCACI,4BACI,4BACI,kBAAC,IAAD,CAAM5E,GAAG,YAAT,mBAEJ,4BACI,kBAAC,IAAD,CAAMA,GAAG,wBAAT,2BC8BL6E,MArCf,WAAsB,IAAD,EACOhG,mBAAS,IADhB,mBACVkF,EADU,KACJe,EADI,KAEbC,EAAUC,cAGR7C,GAFSL,cAESI,OAAS,CAAEC,KAAM,CAAEF,SAAU,OAA/CE,KAYN,OAAIlE,IAaI,kBAACkG,EAAA,EAAD,KACI,yDAZJ,kBAACA,EAAA,EAAD,KACA,4CACA,kBAACA,EAAA,EAAKC,MAAN,CAAYC,UAAU,kBACd,kBAACF,EAAA,EAAKG,MAAN,wBACA,kBAACH,EAAA,EAAKI,QAAN,CAAc3B,KAAK,OAAOI,MAAOe,EAAMlB,SAAU,SAAAC,GAAC,OAAIgC,EAAQhC,EAAEC,OAAOC,WAE/E,kBAAC2B,EAAA,EAAD,CAAQ7E,QAlBJ,WACZ3B,aAAa8G,QAAQ,OAAQlB,GACzB9F,IAGA8G,EAAQG,QAAQ/C,GAFhB6B,MAAM,mBAeF,eC2BOmB,MApCnB,WAEQ,OACI,kBAAC,IAAD,CAAQC,SAAUC,IACd,yBAAKpF,UAAU,qBAAqBzC,GAAG,OACnC,gCACI,kBAAC,EAAD,OAEJ,8BACA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO8H,OAAK,EAACC,KAAK,KACd,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,eACd,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,YACd,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,UACd,kBAACC,EAAD,OAEJ,kBAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,SACd,kBAAC,EAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,aACR,kBAAC,EAAD,SAIR,kBAAC,EAAD,SC7CpBE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFhC,SAASC,eAAe,U","file":"static/js/main.18cb6dc5.chunk.js","sourcesContent":["export default 'https://admin.lesvertsdeter.fr'","import axios from \"axios\"\r\nimport burl from \"../env/Config\"\r\n\r\n//headers\r\nlet headers = {\r\n    \"Content-Type\": \"application/json\"\r\n};\r\n\r\nexport function getLastPosts() {\r\n    return axios.get(`${burl}/posts?_sort=created_at:DESC&_limit=10&rubrique.Cheminots=false`)\r\n}\r\n\r\nexport function getPostById(id) {\r\n    return axios.get(`${burl}/posts/${id}`)\r\n}\r\n\r\nexport function getPostsByRubrique(rubrique) {\r\n    return axios.get(`${burl}/posts?rubrique.nom=${rubrique}&_sort=created_at:DESC`)\r\n}\r\n\r\nexport function getPostsResearchTitle(search) {\r\n    return axios.get(`${burl}/posts?titre_contains=${search}&rubrique.Cheminots=false`)\r\n}\r\n\r\nexport function getPostsResearchDescription(search) {\r\n    return axios.get(`${burl}/posts?description_contains=${search}&rubrique.Cheminots=false`)\r\n}\r\n\r\nexport function getAllCategories() {\r\n    return axios.get(`${burl}/categories?_sort=Position:ASC`)\r\n}\r\n\r\nexport function getAccess(Cheminots) {\r\n    if(Cheminots){\r\n        return verifyCode()\r\n    }else{\r\n        return true\r\n    }\r\n}\r\n\r\nexport function verifyCode() {\r\n    let code = localStorage.getItem('SNCF');\r\n    if(code){\r\n        const isLength = code.length === 7\r\n        let isLetter = false\r\n        if(code[6]) isLetter = code[6].match(/[a-z]/i);\r\n        \r\n        return isLength && isLetter\r\n    }else{\r\n        return false\r\n    }\r\n    \r\n}\r\n\r\nexport function sendEmail(email) {\r\n    return axios.post(`${burl}/email`,email,{headers})\r\n}","import React,{useState, useEffect} from 'react'\r\nimport {getAllCategories} from \"../API/index\"\r\nimport {Link} from \"react-router-dom\"\r\nimport $ from \"jquery\"\r\nconst NavBar = () => {\r\n\r\n    const [categories, setCategories] = useState([])\r\n    const [isNavDisplay, setIsNavDisplay] = useState(true)\r\n\r\n    const getCategories = async() => {\r\n        const res = await getAllCategories()\r\n        setCategories(res.data)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getCategories()\r\n    },[])\r\n\r\n    const toggleNav = () => {\r\n        $('#App').toggleClass('translated',isNavDisplay)\r\n        $('#App').toggleClass('not-translated',!isNavDisplay)\r\n        setIsNavDisplay(!isNavDisplay)\r\n    }\r\n    const displayMenu = () => {\r\n        $('#App').toggleClass('translated',false)\r\n        $('#App').toggleClass('not-translated',true)\r\n        setIsNavDisplay(true)\r\n    }\r\n\r\n    const toggleMenu = (bool, index) => {\r\n        $(index).toggleClass('displayed',bool)\r\n        $(index).toggleClass('not-displayed',!bool)\r\n    }\r\n\r\n    $('a').on('click', () => displayMenu())\r\n\r\n    return(\r\n        <>\r\n        <nav id=\"mobile\">\r\n            <div>\r\n                <button onClick={toggleNav}><img src=\"https://cdn4.iconfinder.com/data/icons/wirecons-free-vector-icons/32/menu-alt-512.png\"></img></button>\r\n                <Link to=\"/\"><img className=\"logo\" src=\"logo-vers-de-ter.png\" alt='logo'></img></Link>\r\n                <Link to={`/Rechercher`}><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/OOjs_UI_icon_search.svg/600px-OOjs_UI_icon_search.svg.png\"></img></Link>\r\n            </div>\r\n            <div className=\"navigation\">\r\n                <div>\r\n                    <h1>LES VERTS DE TER</h1>\r\n                    <button onClick={toggleNav}>\r\n                        <img src=\"https://cdn4.iconfinder.com/data/icons/flat-black/512/next.png\"></img>\r\n                    </button>\r\n                </div>\r\n                <ul>\r\n                    {\r\n                        categories.map(({nom, rubriques}) => {\r\n                            return (\r\n                                <li key={nom}>\r\n                                    {nom}\r\n                                    <div>\r\n                                        <ul>\r\n                                            {\r\n                                                rubriques.map(({nom}) => {\r\n                                                    return (\r\n                                                        <li>\r\n                                                            <Link to={`/${nom}`}>{nom}</Link>\r\n                                                        </li>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                        </ul>\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        })\r\n                    }\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n        <nav id=\"desktop\">\r\n            <div>\r\n                <div>\r\n                    <Link to=\"/\">\r\n                        <img className=\"logo\" src=\"logo-vers-de-ter.png\" alt='logo'></img>\r\n                        <h1>LES VERTS DE TER</h1>\r\n                    </Link>\r\n                    \r\n                </div>\r\n                <div>\r\n                    <Link to={`/Rechercher`}><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/OOjs_UI_icon_search.svg/600px-OOjs_UI_icon_search.svg.png\"></img>RECHERCHER</Link>\r\n                </div>\r\n            </div>\r\n            <ul>\r\n                    {\r\n                        categories.map(({nom, rubriques}, index) => {\r\n                            return (\r\n                                <li key={nom} onMouseOver={() => toggleMenu(true, `#${index}`)} onMouseOut={() => toggleMenu(false, `#${index}`)}>\r\n                                    {nom}\r\n                                    <div>\r\n                                        <ul id={index} className=\"not-displayed\">\r\n                                            {\r\n                                                rubriques.map(({nom}) => {\r\n                                                    return (\r\n                                                        <li>\r\n                                                            <Link to={`/${nom}`}>{nom}</Link>\r\n                                                        </li>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                        </ul>\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        })\r\n                    }\r\n            </ul>\r\n        </nav>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NavBar","import React from 'react'\r\nimport {Link} from 'react-router-dom';\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport burl from \"../env/Config\"\r\n\r\nconst ArticleList = ({titre, description, rubrique, id, link, gallerie}) => {\r\n    return(\r\n        \r\n        <div className=\"article_list\" key={id}>\r\n            <Link to={link}>\r\n            <img src={gallerie.length !== 0 && `${burl}${gallerie[0].url}`} alt={titre} />\r\n            <h1>{titre}</h1>\r\n            <div className=\"description\">\r\n                <ReactMarkdown\r\n                    source={truncateString(description, 100)}\r\n                    escapeHtml={false}\r\n                />\r\n            </div>\r\n            <div>\r\n                <span className=\"rubrique_name\">\r\n                    <img src=\"https://img2.pngio.com/green-tag-icon-free-green-price-tag-icons-green-tag-png-256_256.png\" />\r\n                    {rubrique.nom}\r\n                </span>\r\n            </div>\r\n            </Link>\r\n        </div>    \r\n    )\r\n}\r\n\r\n\r\nfunction truncateString(str, num) {\r\n    // If the length of str is less than or equal to num\r\n    // just return str--don't truncate it.\r\n    if (str.length <= num) {\r\n      return str\r\n    }\r\n    // Return str truncated with '...' concatenated to the end of str.\r\n    return str.slice(0, num) + '...'\r\n  }\r\n\r\nexport default ArticleList","import React,{useState, useEffect} from \"react\"\r\nimport {getLastPosts} from \"../API/index\"\r\n\r\nimport ArticleList from \"./ArticleList\";\r\nconst Home = () => {\r\n\r\n    const [posts, setPosts] = useState([])\r\n\r\n    const getPosts = async() => {\r\n        const res = await getLastPosts()\r\n        setPosts(res.data)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getPosts()\r\n    },[])\r\n\r\n    return(\r\n        <>\r\n        <img src=\"banner-mobile.png\" id=\"banner-mobile\"/>\r\n        <img src=\"banner.png\" id=\"banner-desktop\"/>\r\n        <div className=\"title_block\">\r\n            <h2>Dernières actus</h2>\r\n        </div>\r\n        {\r\n            posts.map(({titre, description, rubrique, id, gallerie}) => {\r\n                return (\r\n                    <ArticleList \r\n                        titre={titre} \r\n                        description={description} \r\n                        rubrique={rubrique} \r\n                        id={id}\r\n                        gallerie={gallerie}\r\n                        link={`/${rubrique.nom}/${id}`}\r\n                    />\r\n                )\r\n            })\r\n        }\r\n        </>\r\n    )\r\n}\r\nexport default Home","import React,{useState, useEffect} from \"react\"\r\nimport {useParams, useRouteMatch, Redirect, useLocation} from \"react-router-dom\";\r\nimport {getPostsByRubrique, getAccess} from \"../API/index\"\r\nimport ArticleList from \"./ArticleList\"\r\n\r\nconst Rubrique = () => {\r\n\r\n    let {nom} = useParams()\r\n    let {url} = useRouteMatch();\r\n    const [posts, setPosts] = useState([])\r\n    let location = useLocation();\r\n    \r\n\r\n    useEffect(() => {\r\n        const getPosts = async() => {\r\n            const res = await getPostsByRubrique(nom)\r\n            setPosts(res.data)\r\n        }\r\n        getPosts()\r\n    },[nom])\r\n\r\n    if(posts){\r\n        if(getAccess(posts.some(p => p.rubrique.Cheminots)) === false){\r\n            return <Redirect to={{pathname: '/login', state: {from: location}}}/>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"title_block\">\r\n            <h2>{nom}</h2>\r\n        </div>\r\n        {\r\n            posts.map(({titre, description, rubrique, id, gallerie}) => {\r\n                return (\r\n                    <ArticleList \r\n                        titre={titre} \r\n                        description={description} \r\n                        rubrique={rubrique} \r\n                        id={id}\r\n                        gallerie={gallerie}\r\n                        link={`${url}/${id}`}\r\n                    />\r\n                )\r\n            })\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Rubrique","import React,{useState, useEffect} from \"react\"\r\nimport {getPostsResearchTitle, getPostsResearchDescription} from \"../API/index\"\r\nimport ArticleList from './ArticleList';\r\nconst Search = () => {\r\n\r\n    const [postsByTitle, setPostsByTitle] = useState([])\r\n    const [postsByDescription, setPostsByDescription] = useState([])\r\n    const [search, setSearch] = useState(\"\")\r\n\r\n    const searchPostsByTitle = async() => {\r\n        const res = await getPostsResearchTitle(search)\r\n        setPostsByTitle(res.data)\r\n    }\r\n    const searchPostsByDescription = async() => {\r\n        const res = await getPostsResearchDescription(search)\r\n        setPostsByDescription(res.data)\r\n    }\r\n\r\n    useEffect(() => {\r\n        searchPostsByTitle()\r\n        searchPostsByDescription()\r\n    },[search])\r\n\r\n    return(\r\n        <>\r\n        <div className=\"title_block\">\r\n            <input type=\"text\" onChange={(e) => setSearch(e.target.value)} value={search} placeholder=\"Rechercher ici..\"/>\r\n        </div>\r\n        {\r\n            postsByTitle.map(({titre, description, rubrique, gallerie, id}) => {\r\n                return (\r\n                    <ArticleList \r\n                        titre={titre} \r\n                        description={description} \r\n                        rubrique={rubrique} \r\n                        id={id}\r\n                        gallerie={gallerie}\r\n                        link={`/${rubrique.nom}/${id}`}\r\n                    />\r\n                )\r\n            })\r\n        }\r\n        {\r\n            postsByDescription.map(({titre, description, rubrique, id, gallerie}) => {\r\n                const isExisting = postsByTitle.some((post) => post.id === id)\r\n                if( !isExisting ){\r\n                    return (\r\n                        <ArticleList \r\n                            titre={titre} \r\n                            description={description} \r\n                            rubrique={rubrique} \r\n                            id={id}\r\n                            gallerie={gallerie}\r\n                            link={`/${rubrique.nom}/${id}`}\r\n                        />\r\n                    )\r\n                }else {\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default Search","import React,{useState, useEffect} from \"react\"\r\nimport {useParams} from \"react-router-dom\";\r\nimport {getPostById, getAccess} from \"../API/index\"\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport Carousel from 'react-bootstrap/Carousel'\r\nimport burl from \"../env/Config\"\r\nimport {Redirect, useLocation} from \"react-router-dom\"\r\n\r\n\r\nconst Article = () => {\r\n\r\n    const [post, setPost] = useState({})\r\n    let{id} = useParams()\r\n    let location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const getPost = async() => {\r\n            const res = await getPostById(id)\r\n            setPost(res.data)\r\n        }\r\n         getPost()\r\n    },[id])\r\n\r\n    if(post && post.rubrique){\r\n        if(getAccess(post.rubrique.Cheminots) === false){\r\n            return <Redirect to={{pathname: '/login', state: {from: location}}}/>\r\n        }\r\n    }\r\n    \r\n\r\n    return (\r\n        <div className=\"article\">  \r\n            <Carousel>\r\n            {\r\n                post.gallerie ? (\r\n                    post.gallerie.map(({url, name}) => {\r\n                        return (\r\n                            <Carousel.Item>\r\n                                <img\r\n                                    src={`${burl}${url}`}\r\n                                    alt={name}\r\n                                />\r\n                            </Carousel.Item>\r\n                        )\r\n                    })\r\n                ):(\r\n                    \"\"\r\n                )\r\n            }\r\n            </Carousel>\r\n            <h1>\r\n                {post.titre}\r\n            </h1>\r\n            <ReactMarkdown\r\n                source={post.description}\r\n                escapeHtml={false}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nexport default Article","import React from \"react\"\r\nimport {Form, Button} from \"react-bootstrap\"\r\nimport {sendEmail} from \"../API/index\"\r\nconst Contact = () => {\r\n\r\n    const postEmail = async() => {\r\n        const mail = document.getElementById('mail').value\r\n        const message = document.getElementById('message').value\r\n        const email = {\r\n            to: \"delpiahugo@gmail.com\", \r\n            from: \"no-reply@vertsdeter-sud.fr\", \r\n            subject: `${mail} vient d'envoyer un message`,\r\n            text: message\r\n        }\r\n        if(mail === \"\" || message === \"\") {\r\n            alert(\"Veuillez remplir tout les champs\")\r\n        }else{\r\n            sendEmail(email)\r\n            .then(() => {\r\n                alert('Votre message a bien été envoyé')\r\n            })\r\n            .catch(() => {\r\n                alert(\"Erreur de connexion !\")\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n            <Form >\r\n                <h2>Nous contacter</h2>\r\n                <Form.Group controlId=\"mail\">\r\n                    <Form.Label>Votre email</Form.Label>\r\n                    <Form.Control type=\"email\" />\r\n                    <Form.Text className=\"text-muted\">\r\n                    Votre email ne sera pas partagée\r\n                    </Form.Text>\r\n                </Form.Group>\r\n                <Form.Group controlId=\"message\">\r\n                    <Form.Label>Votre message</Form.Label>\r\n                    <Form.Control as=\"textarea\" rows=\"10\" />\r\n                </Form.Group>\r\n                <Button onClick={postEmail}> Valider </Button>\r\n            </Form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Contact","import React from 'react'\r\nimport {Link} from \"react-router-dom\"\r\n\r\nconst Footer = () => {\r\n    return(\r\n        <footer>\r\n            <ul>\r\n                <li>\r\n                    <Link to=\"/Contact\">Nous contacter</Link>\r\n                </li>\r\n                <li>\r\n                    <Link to=\"/mentions-légales\">Mentions légales</Link>\r\n                </li>\r\n            </ul>\r\n        </footer>\r\n    )\r\n}\r\nexport default Footer","import React,{useState, useEffect} from \"react\"\r\nimport {verifyCode} from \"../API/index\"\r\nimport {useHistory, useLocation} from \"react-router-dom\"\r\nimport {Form, Button} from \"react-bootstrap\"\r\nfunction LoginPage() {\r\n    const [text, setText] = useState(\"\")\r\n    let history = useHistory();\r\n    let location = useLocation();\r\n  \r\n    let { from } = location.state || { from: { pathname: \"/\" } };\r\n\r\n    let login = () => {\r\n    localStorage.setItem(\"SNCF\", text)\r\n    if(!verifyCode()){\r\n        alert(\"Code invalide\")\r\n    }else{\r\n        history.replace(from);\r\n    }\r\n    \r\n    };\r\n\r\n    if(!verifyCode()) {\r\n        return (\r\n            <Form>\r\n            <h2>Se connecter</h2>\r\n            <Form.Group controlId=\"formBasicEmail\">\r\n                    <Form.Label>Votre code SNCF</Form.Label>\r\n                    <Form.Control type=\"text\" value={text} onChange={e => setText(e.target.value)}/>\r\n            </Form.Group>\r\n            <Button onClick={login}> Valider </Button>\r\n            </Form>\r\n          );\r\n    }else{\r\n        return(\r\n            <Form>\r\n                <h2>Vous êtes connecté</h2>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LoginPage","import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {\n    BrowserRouter as Router,\n    Route,\n    Switch,\n    Redirect\n} from \"react-router-dom\"\nimport \"./App.scss\"\n\nimport NavBar from \"../Components/NavBar\"\nimport HomePage from '../Components/Homepage';\nimport Rubrique from '../Components/Rubrique'\nimport Search from '../Components/Search';\nimport Article from '../Components/Article';\nimport Contact from \"../Components/Contact\"\nimport Footer from \"../Components/Footer\"\nimport {verifyCode} from \"../API/index\"\nimport Auth from \"../Components/Auth\"\n\nfunction App() {\n        \n        return (\n            <Router basename={process.env.PUBLIC_URL}>\n                <div className=\"App not-translated\" id=\"App\">\n                    <header>\n                        <NavBar/>\n                    </header>\n                    <main>\n                    <Switch>\n                        <Route exact path=\"/\" >\n                            <HomePage/>\n                        </Route>\n                        <Route exact path=\"/Rechercher\">\n                            <Search/>\n                        </Route>\n                        <Route exact path=\"/Contact\">\n                            <Contact/>\n                        </Route>\n                        <Route exact path=\"/login\">\n                            <Auth />\n                        </Route>\n                        <Route exact path=\"/:nom\">\n                            <Rubrique/>\n                        </Route>\n                        <Route path=\"/:nom/:id\">\n                            <Article/>\n                        </Route>\n                    </Switch>\n                    </main>\n                    <Footer/>\n                </div>\n            </Router>\n        );\n}\n\n    export default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}